/*! Keydrown - v0.0.0 - 2013-04-20 - http://jeremyckahn.github.com/keydrown */
(function(n){var t=function(){var t={};t.forEach=function(n,t){var e;for(e in n)n.hasOwnProperty([e])&&t(n[e],e)};var e=t.forEach;return t.getTranspose=function(n){var t={};return e(n,function(n,e){t[n]=e}),t},t.pushUnique=function(n,t){-1===n.indexOf(t)&&n.push(t)},t.removeValue=function(n,t){var e=n.indexOf(t);return-1!==e?n.splice(e,1)[0]:void 0},t.on=function(n,t,e){n.addEventListener?n.addEventListener(t,e,!1):n.attachEvent&&n.attachEvent("on"+t,e)},t.requestAnimationFrame=function(){return n.requestAnimationFrame||n.webkitRequestAnimationFrame||n.mozRequestAnimationFrame||function(t){n.setTimeout(t,1e3/60)}}(),t.noop=function(){},t}(),e={A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40},o=t.getTranspose(e),i=[],r=function(){"use strict";function n(n,t){this._keyName=n,this._keyCode=t}return n.prototype._downHandler=t.noop,n.prototype._upHandler=t.noop,n.prototype.down=function(n){n?this._downHandler=n:this._downHandler()},n.prototype.up=function(n){n?this._upHandler=n:this._upHandler()},n.prototype.unbindDown=function(){this._downHandler=t.noop},n.prototype.unbindUp=function(){this._upHandler=t.noop},n}(),u=function(i){"use strict";var u={};u.Key=r;var a=!1;return u.tick=function(){var n,t=i.length;for(n=0;t>n;n++){var e=i[n],r=o[e];r&&u[r].down()}},u.run=function(e){a=!0,t.requestAnimationFrame.call(n,function(){a&&(u.run(e),e())})},u.stop=function(){a=!1},t.forEach(e,function(n,t){u[t]=new r(t,n)}),t.on(n,"keydown",function(n){t.pushUnique(i,n.keyCode)}),t.on(n,"keyup",function(n){var e=t.removeValue(i,n.keyCode),r=o[e];r&&u[r].up()}),u}(i);"function"==typeof define&&define.amd?define(function(){return u}):n.kd=u})(this);