/*! Keydrown - v0.0.0 - 2013-04-20 - http://jeremyckahn.github.com/keydrown */
(function(n){var t=function(){var t={};t.forEach=function(n,t){var o;for(o in n)n.hasOwnProperty([o])&&t(n[o],o)};var o=t.forEach;return t.getTranspose=function(n){var t={};return o(n,function(n,o){t[n]=o}),t},t.pushUnique=function(n,t){-1===n.indexOf(t)&&n.push(t)},t.removeValue=function(n,t){var o=n.indexOf(t);return-1!==o?n.splice(o,1)[0]:void 0},t.on=function(n,t,o){n.addEventListener?n.addEventListener(t,o,!1):n.attachEvent&&n.attachEvent("on"+t,o)},t.requestAnimationFrame=function(){return n.requestAnimationFrame||n.webkitRequestAnimationFrame||n.mozRequestAnimationFrame||function(t){n.setTimeout(t,1e3/60)}}(),t.noop=function(){},t}(),o={A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40},e=t.getTranspose(o),r=[],i=function(){"use strict";function n(){}return n.prototype._downHandler=t.noop,n.prototype._upHandler=t.noop,n.prototype.down=function(n){n?this._downHandler=n:this._downHandler()},n.prototype.up=function(n){n?this._upHandler=n:this._upHandler()},n.prototype.unbindDown=function(){this._downHandler=t.noop},n.prototype.unbindUp=function(){this._upHandler=t.noop},n}(),u=function(r){"use strict";var u={};u.Key=i;var a=!1;return u.tick=function(){var n,t=r.length;for(n=0;t>n;n++){var o=r[n],i=e[o];i&&u[i].down()}},u.run=function(o){a=!0,t.requestAnimationFrame.call(n,function(){a&&(u.run(o),o())})},u.stop=function(){a=!1},t.forEach(o,function(n,t){u[t]=new i}),t.on(n,"keydown",function(n){t.pushUnique(r,n.keyCode)}),t.on(n,"keyup",function(n){var o=t.removeValue(r,n.keyCode),i=e[o];i&&u[i].up()}),u}(r);"function"==typeof define&&define.amd?define(function(){return u}):n.kd=u})(this);